{"ast":null,"code":"var _jsxFileName = \"/Users/Nikhil/Documents/rice-chat/client/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport signup from './containers/signup';\nimport logout from './containers/logout';\nimport Subscribe from './containers/subscribe';\nimport jwt_decode from 'jwt-decode';\nimport * as ROUTES from './constants/routes';\nimport login from './containers/login';\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tokenPresent: false\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.jwtToken) {\n      const token = localStorage.jwtToken;\n      console.log(token);\n      const decoded = jwt_decode(token); //console.log(\"HI\",decoded);\n\n      const currentTime = Date.now() / 1000; // to get in miliseconds\n\n      if (decoded.expiresIn < currentTime) {\n        window.location.history = '/logout';\n        this.setState({\n          tokenPresent: true\n        });\n      }\n    }\n  }\n\n  render() {\n    const tokenPresent = this.state.tokenPresent;\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, tokenPresent ? React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: ROUTES.LOG_IN,\n      component: login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: ROUTES.SIGN_UP,\n      component: signup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: ROUTES.LOG_OUT,\n      component: logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: ROUTES.SUBSCRIBE,\n      component: Subscribe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    })) : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: ROUTES.LOG_IN,\n      component: login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: ROUTES.SIGN_UP,\n      component: signup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Nikhil/Documents/rice-chat/client/src/App.js"],"names":["React","signup","logout","Subscribe","jwt_decode","ROUTES","login","BrowserRouter","Router","Route","Redirect","App","Component","constructor","state","tokenPresent","componentDidMount","localStorage","jwtToken","token","console","log","decoded","currentTime","Date","now","expiresIn","window","location","history","setState","render","LOG_IN","SIGN_UP","LOG_OUT","SUBSCRIBE"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,KAAKC,MAAZ,MAAwB,oBAAxB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,KAAlC,EAAyCC,QAAzC,QAAwD,kBAAxD;;AAEA,MAAMC,GAAN,SAAkBX,KAAK,CAACY,SAAxB,CAAiC;AAChCC,EAAAA,WAAW,GAAG;AACb;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,YAAY,EAAE;AADF,KAAb;AAGA;;AAEDC,EAAAA,iBAAiB,GAAG;AACnB,QAAGC,YAAY,CAACC,QAAhB,EAA0B;AACxB,YAAMC,KAAK,GAAGF,YAAY,CAACC,QAA3B;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,YAAMG,OAAO,GAAKlB,UAAU,CAACe,KAAD,CAA5B,CAHwB,CAIxB;;AACA,YAAMI,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC,CALwB,CAKe;;AACvC,UAAGH,OAAO,CAACI,SAAR,GAAoBH,WAAvB,EAAoC;AACnCI,QAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,GAAwB,SAAxB;AACA,aAAKC,QAAL,CAAc;AACbf,UAAAA,YAAY,EAAE;AADD,SAAd;AAGA;AACF;AAED;;AACDgB,EAAAA,MAAM,GAAG;AAAA,UACAhB,YADA,GACiB,KAAKD,KADtB,CACAC,YADA;AAEP,WACC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACEA,YAAY,GACZ,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAEV,MAAM,CAAC2B,MAA1B;AAAkC,MAAA,SAAS,EAAE1B,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADN,EAEM,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAED,MAAM,CAAC4B,OAA1B;AAAmC,MAAA,SAAS,EAAEhC,MAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFN,EAGM,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAEI,MAAM,CAAC6B,OAA1B;AAAmC,MAAA,SAAS,EAAEhC,MAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHN,EAIM,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAEG,MAAM,CAAC8B,SAA1B;AAAqC,MAAA,SAAS,EAAEhC,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJN,CADY,GAQV,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAEE,MAAM,CAAC2B,MAA1B;AAAkC,MAAA,SAAS,EAAE1B,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAED,MAAM,CAAC4B,OAA1B;AAAmC,MAAA,SAAS,EAAEhC,MAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CATJ,CADD;AAkBD;;AA5C+B;;AA+CjC,eAAeU,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport signup from './containers/signup';\nimport logout from './containers/logout';\nimport Subscribe from './containers/subscribe';\nimport jwt_decode from 'jwt-decode';\nimport * as ROUTES from './constants/routes';\nimport login from './containers/login';\nimport { BrowserRouter as Router, Route, Redirect} from \"react-router-dom\";\n\t\nclass App extends React.Component{\n\tconstructor() {\n\t\tsuper();       \n\t\tthis.state = {\n\t\t\ttokenPresent: false\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif(localStorage.jwtToken) {\n\t\t  const token = localStorage.jwtToken;\n\t\t  console.log(token);\n\t\t  const decoded  =  jwt_decode(token);\n\t\t  //console.log(\"HI\",decoded);\n\t\t  const currentTime = Date.now() / 1000; // to get in miliseconds\n\t\t  if(decoded.expiresIn < currentTime) {\n\t\t  \twindow.location.history='/logout';\n\t\t  \tthis.setState({\n\t\t  \t\ttokenPresent: true\n\t\t  \t})\n\t\t  }\n\t\t}\n\n\t}\n\trender() {\n\t\tconst { tokenPresent } = this.state;\n\t\t\treturn (\n\t\t\t\t<Router>\n\t\t\t\t\t{tokenPresent ? \n\t\t\t\t\t\t<React.Fragment>\t\t\t  \t\t\n\t\t\t\t        <Route exact path={ROUTES.LOG_IN} component={login} />\n\t\t\t\t        <Route exact path={ROUTES.SIGN_UP} component={signup} />\n\t\t\t\t        <Route exact path={ROUTES.LOG_OUT} component={logout} />\n\t\t\t\t        <Route exact path={ROUTES.SUBSCRIBE} component={Subscribe} /> \n\t\t\t\t        </React.Fragment>\n\t\t\t    :\n\t\t\t    \t<React.Fragment>\n\t\t\t        \t<Route exact path={ROUTES.LOG_IN} component={login} />\n\t\t\t\t        <Route exact path={ROUTES.SIGN_UP} component={signup} />\n\t\t\t        </React.Fragment>\n\t\t\t    }\n\t\t\t    </Router>\n\t\t\t\t);\n\t\t\t    \n\t}\n}\n\nexport default App;\n "]},"metadata":{},"sourceType":"module"}