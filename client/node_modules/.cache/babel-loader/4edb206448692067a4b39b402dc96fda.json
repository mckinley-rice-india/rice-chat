{"ast":null,"code":"var _jsxFileName = \"/Users/Nikhil/Documents/rice-chat/client/src/containers/login.js\";\nimport axios from 'axios';\nimport { BrowserRouter, Link, Redirect } from 'react-router-dom';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport * as ROUTES from '../constants/routes';\nimport signup from './signup';\nimport sha256 from 'sha256';\nexport default class login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: '',\n      password: '',\n      status: false,\n      subscribed: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  handlePasswordChange(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const data = {\n      email: this.state.email,\n      password: sha256(this.state.password)\n    };\n    console.log(data);\n    axios.post(\"http://localhost:5000/\", data).then(res => {\n      localStorage.setItem(\"jwtToken\", res.data.Body);\n\n      if (res.data.Subscribed == true) {\n        this.setState({\n          subscribed: true,\n          status: true\n        });\n      } else {\n        this.setState({\n          subscribed: false,\n          status: true\n        });\n      }\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          status = _this$state.status,\n          subscribed = _this$state.subscribed,\n          msg = _this$state.msg;\n\n    if (status && subscribed) {\n      return React.createElement(Redirect, {\n        to: ROUTES.LOG_OUT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      });\n    } else {\n      if (this.state.status === true && this.state.subscribed === false) {\n        return React.createElement(Redirect, {\n          to: ROUTES.SUBSCRIBE,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(Container, {\n          className: \"divStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"divStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Log In\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \" Need a Ricechat account? \", React.createElement(Link, {\n          to: \"/signup\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \" Signup \"), \" \"), React.createElement(\"form\", {\n          onSubmit: this.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"divStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Email:\", React.createElement(\"input\", {\n          type: \"text\",\n          name: \"email\",\n          onChange: this.handleEmailChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"divStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Password:\", React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          onChange: this.handlePasswordChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"divStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"Submit\",\n          name: \"Login\",\n          value: \"Login\",\n          className: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }))))));\n      }\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/Nikhil/Documents/rice-chat/client/src/containers/login.js"],"names":["axios","BrowserRouter","Link","Redirect","Container","Row","Col","React","Component","ROUTES","signup","sha256","login","constructor","state","email","password","status","subscribed","handleSubmit","bind","handlePasswordChange","handleEmailChange","e","setState","target","value","preventDefault","data","console","log","post","then","res","localStorage","setItem","Body","Subscribed","render","msg","LOG_OUT","SUBSCRIBE"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { BrowserRouter,Link,Redirect } from 'react-router-dom'\nimport {Container, Row, Col} from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport * as ROUTES from '../constants/routes';\nimport signup from './signup';\nimport sha256 from 'sha256';\n\n\n\nexport default class login extends React.Component\n{\n\tconstructor(){\n\t\tsuper();\n\t\tthis.state={\n\t\t\temail: '',\n\t\t\tpassword: '',\n\t\t\tstatus: false,\n\t\t\tsubscribed: false,\n\t\t};\n\t\tthis.handleSubmit=this.handleSubmit.bind(this);\n\t\tthis.handlePasswordChange=this.handlePasswordChange.bind(this);\n\t\tthis.handleEmailChange=this.handleEmailChange.bind(this);\n\t}\n\thandleEmailChange(e){\n\n\t\tthis.setState({email: e.target.value});\n\n\t}\n\thandlePasswordChange(e){\n\n\t\tthis.setState({password: e.target.value});\n\n\t}\n\thandleSubmit(e){\n\t\te.preventDefault();\n\t\tconst data = {\n\t\t\temail: this.state.email,\n\t\t\tpassword: sha256(this.state.password),\n\t\t}\n\t\tconsole.log(data);\n\t\taxios.post(\"http://localhost:5000/\", data).then((res)=>{\n    \t\t \t\tlocalStorage.setItem(\"jwtToken\", res.data.Body);\n    \t\t \t\tif(res.data.Subscribed==true)\n    \t\t \t\t{\n    \t\t \t\t\tthis.setState({subscribed: true, status : true});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setState({subscribed: false, status : true});\n\t\t\t\t\t}\n\n    \t})\n  \t}\n \n  \trender()\n\n  \t\t{const {status, subscribed, msg} = this.state;\n  \t\t\tif(status && subscribed){\n\t\t\t\treturn <Redirect to={ROUTES.LOG_OUT} />\n\t\t\t }\n\t\t\telse \n\t\t\t{\t\t\t\n   \t\t\t\tif(this.state.status===true && this.state.subscribed===false)\n\t\t\t\t{\n\t\t\t\t\treturn <Redirect to={ROUTES.SUBSCRIBE} />\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t    return(\n\t\t\t\t    <Container className=\"divStyle\">\n\t\t\t\t\t<div className=\"divStyle\">\n\t\t\t\t\t<h1>Log In</h1>\n\t\t\t\t\t<p> Need a Ricechat account? <Link to=\"/signup\"> Signup </Link> </p>\n\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<div className=\"divStyle\">\n\t\t\t\t\t<label>\n\t\t\t\t\tEmail: \n\t\t\t\t\t    <input type=\"text\" \n\t\t\t               name=\"email\" onChange={this.handleEmailChange}/>\n\t\t\t        </label>\n\t\t\t        </div>\n\t\t\t        <div className=\"divStyle\">\n\t\t\t        <label>\n\t\t\t\t\tPassword: \n\t\t\t\t\t    <input type=\"password\" \n\t\t\t               name=\"password\" onChange={this.handlePasswordChange}/>\n\t\t\t        </label>\n\t\t\t        </div>\n\t\t\t        <div className=\"divStyle\">\n\t\t\t        <label> \n\t\t\t\t\t    <input type=\"Submit\" \n\t\t\t               name=\"Login\" value=\"Login\" className=\"submit\"/>\n\t\t\t        </label>\n\t\t\t        </div>\n\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t</Container>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}